<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UWC Technologies | UWC TTO</title>

  <link rel="stylesheet" href="/assets/css/tto.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    .card { transition: transform 0.2s; }
    .card:hover { transform: translateY(-5px); }
    .btn-primary {
      background-color: #002b5c;
      border-color: #002b5c;
    }
    .btn-primary:hover {
      background-color: #001f43;
      border-color: #001f43;
    }
  </style>
</head>
<body>
  <div id="header"></div>
  <div id="breadcrumb-placeholder"></div>

  <div class="container my-5">
    <div class="row justify-content-center" id="content-container">
      <div class="col-12 text-center">
        <p>Loading technologies...</p>
      </div>
    </div>
  </div>

  <div id="footer"></div>

  <script src="/assets/js/loadHeader.js"></script>
  <script src="/assets/js/components.js"></script>
  <script>
    window.handleTechData = function(data) {
      const container = document.getElementById('content-container');
      
      if (!data || data.length === 0) {
        container.innerHTML = '<div class="col-12 text-center"><p>No content available.</p></div>';
        return;
      }
      
      container.innerHTML = '';
      
      data.forEach(item => {
        const div = document.createElement('div');
        div.className = 'col-12 mb-5';
        div.innerHTML = `
          <div class="card border-0 shadow-sm">
            <div class="row g-0">
              ${item.ImageURL ? `
                <div class="col-md-6">
                  <img src="${item.ImageURL}" 
                    class="img-fluid rounded-start" 
                    alt="${item.Title}"
                    style="width: 100%; height: 400px; object-fit: cover;">
                </div>
              ` : ''}
              <div class="${item.ImageURL ? 'col-md-6' : 'col-12'} d-flex align-items-center">
                <div class="card-body p-4">
                  <h2 class="card-title h3 mb-3">${item.Title}</h2>
                  <p class="card-text">${item.Description}</p>
                  ${item.URL ? 
                    `<a href="${item.URL}" class="btn btn-primary mt-3" target="_blank">Learn More</a>` : 
                    ''}
                </div>
              </div>
            </div>
          </div>
        `;
        container.appendChild(div);
      });
    };

    const script = document.createElement('script');
    const url = new URL('https://script.google.com/macros/s/AKfycby1YngYPcv0vcaEUcaGyQPup1aY3Z24ZgWypYXcJ0AsB3f7FJWmZFBzael4-0xK4nSE/exec');
    url.searchParams.append('callback', 'handleTechData');
    url.searchParams.append('page', 'uwc-tech');
    script.src = url.toString();
    script.async = true;
    script.onerror = () => {
      document.getElementById('content-container').innerHTML = 
        '<div class="col-12 text-center"><p class="text-danger">Could not load content. Please try again later.</p></div>';
    };
    document.body.appendChild(script);
  </script>
</body>
</html>